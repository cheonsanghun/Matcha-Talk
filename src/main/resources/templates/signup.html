<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>회원가입 테스트</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { max-width: 560px; margin: 24px auto; font-family: system-ui, sans-serif; line-height: 1.5; }
    label { display:block; margin-top: 10px; font-weight: 600; }
    input, select { width: 100%; padding: 10px; margin-top: 6px; box-sizing: border-box; }
    button { margin-top: 16px; padding: 10px 14px; cursor: pointer; }
    .msg { margin-top: 12px; white-space: pre-wrap; }
  </style>
</head>
<body>
<h1>회원가입 테스트 폼</h1>
<!-- 이 폼은 기본 제출을 막고, JavaScript fetch로 JSON POST를 보냄 -->
<form id="signupForm">
  <label>로그인 ID (4~30자)
    <input id="loginId" required minlength="4" maxlength="30" placeholder="예: Hanako123" />
  </label>

  <label>비밀번호 (8~64자)
    <input id="password" type="password" required minlength="8" maxlength="64" placeholder="예: P@ssw0rd!" />
  </label>

  <label>표시 이름 (닉네임)
    <input id="nickName" required maxlength="30" placeholder="예: 하나코" />
  </label>

  <label>이메일 (선택)
    <input id="email" type="email" placeholder="예: me@example.com" />
  </label>

  <label>국가코드 (대문자 2자리, KR/JP)
    <input id="countryCode" required maxlength="2" placeholder="KR 또는 JP" />
  </label>

  <label>성별
    <select id="gender" required>
      <option value="">선택</option>
      <option value="M">남(M)</option>
      <option value="F">여(F)</option>
    </select>
  </label>

  <label>생년월일
    <input id="birthDate" type="date" required />
  </label>

  <button type="submit">회원가입 요청 보내기</button>
</form>

<div class="msg" id="msg"></div>

<script>
  // API 엔드포인트 URL (백엔드에서 컨트롤러 만들면 해당 경로로 맞추세요)
  const SIGNUP_URL = '/api/auth/signup';

  document.getElementById('signupForm').addEventListener('submit', async (e) => {
    e.preventDefault(); // 폼의 기본 제출 막기

    const payload = {
      loginId   : document.getElementById('loginId').value.trim(),
      password  : document.getElementById('password').value,
      nickName  : document.getElementById('nickName').value.trim(),
      email     : document.getElementById('email').value.trim() || null,
      countryCode: document.getElementById('countryCode').value.trim().toUpperCase(), // 대문자 강제
      gender    : document.getElementById('gender').value,
      birthDate : document.getElementById('birthDate').value, // yyyy-MM-dd
    };

    try {
      const res = await fetch(SIGNUP_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });

      const text = await res.text(); // 성공/실패 모두 문자열 응답 가정
      document.getElementById('msg').textContent =
        `[HTTP ${res.status}] ${text}`;
    } catch (err) {
      document.getElementById('msg').textContent = '요청 실패: ' + err;
    }
  });
</script>
</body>
</html>
